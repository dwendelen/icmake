<!DOCTYPE html><html><head>
<meta charset="UTF-8">
<title>icmbuild</title>
<style type="text/css">
    figure {text-align: center;}
    img {vertical-align: center;}
</style>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1>icmbuild</h1>
<h2>icmake.8.00.00.tar.gz</h2>
<h2>1992-2015</h2>

<!DOCTYPE html><html><head>
<meta charset="UTF-8">
<style type="text/css">
    figure {text-align: center;}
    img {vertical-align: center;}
    figure {text-align: center;}
    img {vertical-align: center;}
</style>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1></h1>

<!DOCTYPE html><html><head>
<meta charset="UTF-8">
<title>icmbuild(1)</title>
<style type="text/css">
    figure {text-align: center;}
    img {vertical-align: center;}
    figure {text-align: center;}
    img {vertical-align: center;}
    figure {text-align: center;}
    img {vertical-align: center;}
</style>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1>icmbuild(1)</h1>
<h2>icmake.8.00.00.tar.gz A generic program maintenance script</h2>
<h2>1992-2015</h2>


<p>

<h2>NAME</h2>icmbuild - A generic, easy configurable, program maintenance script
<p>

<h2>SYNOPSIS</h2>
       <strong>icmbuild</strong> <em>mode</em>
<p>
<h2>DESCRIPTION</h2>
<p>
The <strong>icmbuild</strong> script is a generic script that can be used to do program
maintenance using <strong>icmake</strong>(1). 
<p>
The script expects two files to be available in the directory where program
maintenance is required, and the <strong>icmbuild</strong> script should be available in your
path or it should be started as, e.g., <em>./icmbuild</em>
<p>
<strong>Icmbuild</strong> assumes that your sources exist in and below a directory in which the
files <em>icmconf</em> and <em>CLASSES</em> live. The file <em>CLASSES</em> contains the
names of all subdirectories in which class-specific sources are kept. The file
<em>icmconf</em> in <strong>icmake</strong>(1)'s distribution offers an example of the
configuration parameters that are used for program maintenance. In this latter
file it is assumed that <strong>C++</strong> sources are maintained, but the <strong>icmbuild</strong> script
is not restricted to do maintenance for <strong>C++</strong> programs.
<p>
<strong>Icmbuild</strong> compiles all sources in each of the subdirectories named in the file
<em>CLASSES</em>, and then compiles all sources in the current working directory
(except for the source containing <em>main()</em>).
<p>
The compiled sources result in object modules which are then kept in a
library, against which the main-object module is linked. It is also possible
to specify additional libraries against which the program must be linked.
<p>
Once a library is constructed it is kept up to date by the script. Changing a
source will result in replacing its former module by its new module in the
library. 
<p>
<h2>KICK-STARTING ICMBUILD</h2>
<p>
Normally, <strong>icmbuild</strong> is installed and used as follows:
    <ul>
    <li>  Install <strong>icmbuild</strong> in your path;
    <li> copy <em>icmconf</em> and <em>CLASSES</em> to your project's base directory
       (i.e., the directory in which and where below the project's sources are
       found);
    <li> Modify the <em>#defines</em> in the file <em>icmconf</em> to taste;
    <li> List the subdirectories containing sources in the file <em>CLASSES</em>
<p>
Note that the order of the classes mentioned in classes <em>is</em> relevant
       here.  It's no problem to add new class (subdirectory) names, but
       reordering should be prevented. If reordering is required, recompile
       the library, as the final object files contain class order-numbers.
       These class-order numbers prevent file-name collisions and thus prevent
       replacing file <em>x.o</em> from class <em>A</em> by file <em>x.o</em> from class
       <em>B</em>;
    <li> Now simply run 
        <pre>

            icmbuild 
        
</pre>

       from the project's base directory and let the help-info tell you
       what your options are. See the next section for the modes of operation.
    </ul>
<p>
<h2>OPTIONS</h2>
<p>
<strong>Icmbuild</strong> may be called with the following operational modes:
    <ul>
    <li><em>clean</em><br>
        clean up remnants of previous activities
    <li><em>help</em><br>
        provide help and exit (default when called without arguments)
    <li><em>library</em><br>
        build the library (static and optionally the dynamic library)
    <li><em>program</em><br>
        build the binary program
    <li><em>program strip</em><br>
        build the stripped binary program
    <li><em>install &lt;base&gt;</em>
        install the software in the locations defined in the <em>icmconf</em>
         file, optionally below the directory <em>&lt;base&gt;</em>
    </ul>
    The <strong>icmconf</strong> file may be given a line defining <em>DEFCOM</em> containing
the default operational mode to use when none is specified. E.g.,
        <pre>

    #define DEFCOM "program"
        
</pre>

    constructs the program when the command `<em>icmbuild</em>' is
entered. <em>DEFCOM</em> may also contain combined options, like 
        <pre>

    #define DEFCOM "program strip"
        
</pre>

    Note that <em>DEFCOM</em> is ignored when an explicit operational mode is
provided to the <strong>icmbuild</strong> script.
<p>
<h2>FILES</h2>
<p>
The mentioned paths are sugestive only and may be installation dependent:
    <ul>
    <li> <strong>/usr/share/icmake/icmconf</strong>
        Example of a <strong>icmbuild</strong> configuration file;
    <li> <strong>/usr/share/icmake/CLASSES</strong>
        Example of a <strong>icmbuild</strong> <em>CLASSES</em> file.
    </ul>
<p>
<h2>EXAMPLES</h2>
<p>
Here is an example of the configuration file <em>icmconf</em> for a concrete
       program, using the library <em>libbobcat1</em> as an additional library:
<p>
<pre>
    // Inspect the following #defines. Change them to taste. If you don't
    // need a particular option, change its value into an empty string

    // For more information about this file: 'man 7 icmconf'

// MAINTENANCE RELATED DEFINES THAT ARE OFTEN ADAPTED:
// ===================================================

    // Uncomment to clear the screen starting the compilation
//#define CLS

    // Uncomment to construct a library. Optionally use another name (don't
    // use lib or an extension like .a)
//#define LIBRARY           "modules"

    // The source containing main():
#define MAIN                "main.cc"

    // The pattern locating sources in a directory:
#define SOURCES             "*.cc"

    //  The extension of object modules:
#define OBJ_EXT             ".o"

    // Uncomment to construct a shared library 
//#define SHARED

    // If the constructed shared library requires additional libraries then
    // specify these here. E.g., if a library /usr/lib/special/libspecial.so
    // is required then specify  "-L/usr/lib/special -lspecial" 
    // Predefined paths (e.g., /lib, /usr/lib) do not have to be specified
#define SHAREDREQ           ""

    // Directory to contain temporary results
#define TMP_DIR             "tmp"

    // Uncomment to use the ALL facility and a class dependency setup in the
    // CLASSES file. When a directory contains a file ALL (optionally rename
    // this filename by providing an alternative name) then all its sources
    // and all sources of all classes depending on it are also compiled.  
    // Class dependencies are indicated by the class name (as the first
    // word on a line) optionally followed by additional class names, which
    // are the classes directly depending on the line's first class name.
//#define USE_ALL             "a"

    // should commands be echoed (ON) or not (OFF) ?
#define USE_ECHO              ON

    //  Use the VERSION file
#define USE_VERSION

    // When DEFCOM "program" is specified './icmbuild' is shorthand for 
    // './icmbuild program'
    // When DEFCOM "library" is specified './icmbuild' is shorthand for 
    // './icmbuild library'
    // The icmstart script may add a DEFCOM specification to this file.
//#define DEFCOM "program"
//#define DEFCOM "library"

// COMPILATION AND LINKING RELATED DEFINES
// =======================================

    // The compiler to use. Define CC instead if a C compiler should be used.
#define CXX            "g++"
//#define CC            "gcc"

    // The compiler options to use. Define CFLAGS instead if a C compiler is
    // used.
#define CXXFLAGS        " --std=c++14 -Wall -g -O2"
//#define CFLAGS        " -Wall -g -O2"

    // The extension of internal header files. See PRECOMP below
#define IH              ".ih"

    // Uncomment to generate precompiled headers. When activated internal
    // header files are precompiled when they are more recent than their 
    // precompiled versions. PRECOMP requires IH
//#define PRECOMP "-x c++-header"

    // Uncomment to relink the binary, even when no sources were changed 
//#define REFRESH


    // Options passed to the linker:
#define LDFLAGS         ""


// LIBRARIES REQUIRED BY THE CONSTRUCTED PROGRAM OR LIBRARY:
// =========================================================

    // any additional libraries the program may need:
#define ADD_LIBRARIES       ""

    // additional paths (other than the standard paths) to locate additional
    // libraries:
#define ADD_LIBRARY_PATHS   ""


// DEFINES RELATED TO USING A PARSER GENERATOR
// ===========================================

    // What is the program generating a parser?
#define PARSGEN             "bisonc++"

    // Flags to pass to PARSGEN:
#define PARSFLAGS           "-V"

    // The subdirectory containing the parser's specification file
#define PARSER_DIR          ""

    // What is the top-level (or only) grammar specification file?
#define PARSSPEC            "grammar"

    // Optionally use patterns to specify additional grammar specification 
    // files. These files are (in)directly included by PARSSPEC. Specify
    // patterns relative to PARSER_DIR
//#define PARSFILES           ""

    // The source file generated by the parser generator
#define PARSOUT             "parse.cc"


// DEFINES RELATED TO USING A SCANNER GENERATOR
// ============================================

    // What is the program generating the lexical scanner?
#define SCANGEN             "flexc++"

    // Flags to provide SCANGEN with:
#define SCANFLAGS           ""

    // The subdirectory containing the scanner's specification file
#define SCANNER_DIR         ""  

    // Name of the lexical scanner specification file
#define SCANSPEC            "lexer"
    
    // Optionally use patterns to specify additional scanner specification 
    // files. These files are (in)directly included by SCANSPEC. Specify
    // patterns relative to SCANNER_DIR
//#define SCANFILES            ""

    // The source file generated by the lexical scanner
#define SCANOUT             "lex.cc"






</pre>

<p>
<h2>SEE ALSO</h2>
    <strong>icmake</strong>(1), <strong>icmconf</strong>(7), <strong>icmstart</strong>(1), <strong>icmstart.rc</strong>(7)
<p>
<h2>BUGS</h2>
    None reported
<p>
<h2>COPYRIGHT</h2>
    This is free software, distributed under the terms of the 
    GNU General Public License (GPL).
<p>
<h2>AUTHOR</h2>
    Frank B. Brokken (<strong>f.b.brokken@rug.nl</strong>).
<p>
